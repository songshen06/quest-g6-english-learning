# 管理员账户系统

本文档描述了Quest G6英语学习应用的管理员账户系统。

## 概述

系统现在支持三种用户角色：
- **学生 (student)**: 普通用户，只能学习课程内容
- **管理员 (admin)**: 可以管理普通用户账户
- **超级管理员 (superadmin)**: 拥有系统最高权限

## 角色权限

### 学生
- 可以学习所有课程内容
- 可以管理自己的学习进度
- 可以查看自己的统计数据
- 可以切换用户（如果已登录多个账户）

### 管理员
- 拥有学生的所有权限
- 可以查看和删除普通用户账户
- 可以管理用户学习进度
- 可以查看系统统计信息
- 在用户界面显示"管理员"标识

### 超级管理员
- 拥有管理员的所有权限
- 可以修改用户角色（提升或降级）
- 可以删除管理员账户
- 可以创建其他管理员账户
- 在用户界面显示"超级管理员"标识

## 初始化设置

当系统中没有任何管理员账户时，会自动显示管理员初始化界面。在此界面中，您可以：

1. 创建管理员账户
2. 创建超级管理员账户（推荐）
3. 设置安全的密码

## 默认配置

- **管理员默认用户名**: `admin`
- **超级管理员默认用户名**: `superadmin`
- **密码要求**: 至少6位字符
- **安全提示**: 不要使用默认密码，建议立即修改

## 使用方法

### 创建管理员账户

1. 首次访问应用时，如果系统检测到没有管理员账户，会自动显示初始化界面
2. 输入用户名和密码
3. 至少创建一个管理员账户
4. 建议同时创建超级管理员账户以便进行高级管理

### 管理用户

1. 使用管理员账户登录
2. 在右上角点击用户头像
3. 在用户列表中，管理员可以看到其他用户的删除按钮
4. 点击删除按钮可以删除用户（需要确认）

### 角色标识

- 管理员用户在用户切换器中会显示蓝色"管理员"标签
- 超级管理员用户显示紫色"超级管理员"标签
- 普通用户不显示特殊标签

## 安全注意事项

1. **密码安全**: 请使用强密码，避免使用默认密码
2. **权限管理**: 超级管理员应该谨慎授予管理员权限
3. **账户保护**: 定期检查管理员账户列表，确保没有异常账户
4. **备份**: 重要数据建议定期备份

## 技术实现

### 类型定义
```typescript
export type UserRole = 'student' | 'admin' | 'superadmin'

export interface User {
  // ... 其他字段
  role: UserRole
  // ...
}
```

### 权限检查函数
- `isAdmin()`: 检查当前用户是否为管理员或超级管理员
- `isSuperAdmin()`: 检查当前用户是否为超级管理员
- `canManageUsers()`: 检查当前用户是否有管理用户的权限
- `hasAdminPrivileges()`: 检查当前用户是否有管理员权限

### 删除权限规则
- 只有管理员或超级管理员可以删除用户
- 不能删除自己当前登录的账户
- 普通管理员不能删除超级管理员

## 故障排除

### 常见问题

1. **无法看到删除按钮**
   - 确认您使用的是管理员账户
   - 检查用户列表中的用户是否有管理员标识

2. **无法创建管理员账户**
   - 确保密码至少6位字符
   - 检查用户名是否已存在
   - 确认两次输入的密码一致

3. **忘记管理员密码**
   - 如果系统中有其他超级管理员，可以请其重置
   - 如果没有其他管理员，可能需要清除本地存储重新初始化

### 开发者信息

管理员系统的相关文件：
- `/src/types/index.ts`: 类型定义
- `/src/store/useUserStore.ts`: 用户状态管理
- `/src/components/auth/UserSwitcher.tsx`: 用户切换界面
- `/src/components/auth/AdminInitialization.tsx`: 管理员初始化界面
- `/src/utils/admin.ts`: 管理员工具函数